<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>MBTI ì±„íŒ… ì‚¬ì´íŠ¸</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css"
    />
    <style>
      body {
        background-color: #fff;
        margin: 0;
        padding: 0;
        font-family: "Pretendard", "Inter", "Segoe UI", sans-serif;
        overflow: hidden;
      }
      /* ì±„íŒ… ì „ì²´ ì»¨í…Œì´ë„ˆ */
      .chat-container {
        display: flex;
        flex-direction: column;
        width: 375px;
        height: 100vh;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: #fff;
        overflow: hidden;
        border: 1.5px solid #f0f0f0;
        min-width: unset;
        max-width: unset;
        margin: 0;
      }
      /* ìƒë‹¨ í—¤ë” ìŠ¤íƒ€ì¼ */
      .chat-header {
        width: 375px;
        min-width: 375px;
        max-width: 375px;
        margin: 0 auto;
        background: linear-gradient(90deg, #fddbaf 60%, #ffe6c7 100%);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.07);
        text-align: center;
        min-height: 48px;
        line-height: 1.2;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        padding: 0;
      }
      .chat-header-avatar {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        margin-right: 10px;
        background: #fff;
        object-fit: contain;
        border: 1.5px solid #f0f0f0;
      }
      .chat-header-title {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .chat-header h6 {
        font-size: 1.6rem;
        margin: 0;
        font-family: "Pretendard", "Inter", "Segoe UI", sans-serif;
        font-weight: 700;
        color: #211816;
      }
      /* ë©”ì‹œì§€ ì˜ì—­ ìŠ¤íƒ€ì¼ */
      .chat-messages {
        flex: 1;
        padding: 24px 18px;
        overflow-y: auto;
        display: flex;
        gap: 1.2rem;
        flex-direction: column;
        background: none;
        margin: 0;
      }
      /* ì…ë ¥ ì˜ì—­ ìŠ¤íƒ€ì¼ */
      .chat-input {
        width: 375px;
        min-width: 375px;
        max-width: 375px;
        padding: 18px 18px 18px 18px;
        border-top: 1.5px solid #f0f0f0;
        background: #fff;
        display: flex;
        align-items: center;
        margin: 0 auto;
        box-sizing: border-box;
      }
      .chat-input form {
        display: flex;
        position: relative;
        flex: 1;
        width: 100%;
      }
      .chat-input textarea {
        flex: 1;
        padding: 13px 16px;
        border-radius: 25px;
        font-size: 1rem;
        border: 1.5px solid #e0e0e0;
        outline: none;
        background: #fff;
        transition: box-shadow 0.2s, border 0.2s;
        font-family: "Pretendard", "Inter", "Segoe UI", sans-serif;
        min-height: 36px;
        max-height: 90px;
        resize: none;
        overflow-y: auto;
        overflow-x: hidden;
        padding-right: 24px;
        box-sizing: border-box;
        scrollbar-width: thin;
        scrollbar-color: #fddbaf transparent;
      }
      .chat-input textarea::-webkit-scrollbar {
        width: 2px;
        background: transparent;
      }
      .chat-input textarea::-webkit-scrollbar-thumb {
        background: #fddbaf;
        border-radius: 1px;
      }
      .chat-input textarea::-webkit-scrollbar-track {
        background: transparent;
        margin: 6px 0;
      }
      .chat-input button {
        width: 28px;
        height: 28px;
        border: none;
        border-radius: 50%;
        background-color: #fddbaf;
        color: #211816;
        cursor: pointer;
        margin-left: 10px;
        font-size: 1rem;
        padding: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background 0.15s, color 0.15s;
      }
      .chat-input button:hover {
        background: #f8c472;
        color: #fff;
      }
      .chat-input .image-upload {
        display: flex;
        align-items: center;
        margin-right: 10px;
      }
      .chat-input .image-upload input[type="file"] {
        display: none;
      }
      .chat-input .image-upload label {
        cursor: pointer;
        font-size: 1.3rem;
        color: #f8c472;
        padding: 6px 8px;
        border-radius: 8px;
        transition: background 0.15s;
      }
      .chat-input .image-upload label:hover {
        background: #fdf6e3;
      }
      .typing-indicator {
        display: inline-block;
        margin-left: 8px;
        font-size: 1.2em;
        color: #bdbdbd;
        letter-spacing: 2px;
        vertical-align: middle;
        animation: blink 1.2s infinite;
      }
      @keyframes blink {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.3;
        }
      }
      img {
        width: 49px;
        height: 52px;
        border-radius: 50%;
      }
      img.avatar {
        width: 44px;
        height: 44px;
        border-radius: 50%;
        object-fit: cover;
      }
      /* ë‚´ê°€ ë³´ë‚¸ ë©”ì‹œì§€ ìŠ¤íƒ€ì¼ */
      .sent-box {
        align-self: flex-end;
        display: flex;
        flex-direction: row-reverse;
        gap: 0.4rem;
        align-items: flex-end;
        max-width: 80%;
        position: relative;
      }
      .sent {
        background-color: #f8c472;
        color: #211816;
        text-align: left;
        padding: 1rem 2rem 1.3rem 2rem;
        border-radius: 24px 8px 32px 32px;
        font-size: 0.84rem;
        box-shadow: 0 2px 12px #f8c47233;
        position: relative;
        margin-right: 8px;
      }
      .sent-time {
        font-size: 0.75em;
        color: #bdbdbd;
        margin-right: 2px;
        margin-top: 6px;
        align-self: flex-end;
      }
      /* ë°›ì€ ë©”ì‹œì§€ ìŠ¤íƒ€ì¼ */
      .received-box {
        align-self: flex-start;
        display: flex;
        flex-direction: row;
        gap: 0.4rem;
        align-items: flex-start;
        max-width: 95%;
        position: relative;
      }
      .received {
        background-color: #f0f0f0;
        text-align: left;
        padding: 0.8rem 1.6rem 1.18rem 1.6rem;
        border-radius: 8px 24px 32px 32px;
        font-size: 0.84rem;
        box-shadow: 0 2px 12px #bdbdbd1a;
        position: relative;
        margin-left: 8px;
        display: inline-block;
      }
      .received-time {
        font-size: 0.75em;
        color: #bdbdbd;
        margin-left: 2px;
        margin-top: 0;
        align-self: flex-end;
        text-align: right;
        float: none;
      }
    </style>
  </head>
  <body>
    <div class="chat-container">
      <div class="chat-header" style="position: relative">
        <button
          onclick="window.location.href='/select'"
          style="
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            font-size: 1.3rem;
            cursor: pointer;
            color: #211816;
            font-family: 'Pretendard', 'Inter', 'Segoe UI', sans-serif;
            padding: 4px 10px;
            border-radius: 8px;
            transition: background 0.15s;
          "
        >
          â†
        </button>
        <div class="chat-header-title">
          <h6 id="chatTitle">ì±—ë´‡</h6>
        </div>
      </div>
      <div class="chat-messages" id="messages"></div>
      <div class="chat-input">
        <div class="image-upload">
          <label for="imageInput"><i class="fas fa-image"></i></label>
          <input type="file" id="imageInput" accept="image/*" />
        </div>
        <form id="chatForm" action="" style="display: flex; flex: 1; align-items: center;">
          <textarea
            id="messageText"
            autocomplete="off"
            placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!"
            style="flex: 1; min-width: 0; min-height: 36px; max-height: 90px; resize: none; overflow-y: auto; font-family: inherit; font-size: 1rem; border-radius: 25px; border: 1.5px solid #e0e0e0; padding: 13px 16px; box-sizing: border-box; transition: box-shadow 0.2s, border 0.2s;"
            rows="1"
          ></textarea>
        </form>
        <button type="submit" form="chatForm" class="send-btn"><i class="fas fa-arrow-up"></i></button>
      </div>
    </div>
    <script>
      const urlParams = new URLSearchParams(window.location.search);
      const mbtiType = urlParams.get("type");
      const chatTitle = document.getElementById("chatTitle");

      if (mbtiType) {
        chatTitle.textContent = `${mbtiType}`;
      }

      const clientId = Date.now();

      const ws = new WebSocket(
        `ws://localhost:8000/ws/${clientId}/${mbtiType}`
      );

      const messagesContainer = document.getElementById("messages");
      const messageInput = document.getElementById("messageText");
      const chatForm = document.getElementById("chatForm");
      const imageInput = document.getElementById("imageInput");
      let responseMessage = null;
      let receivedText = "";
      let greetingStreaming = false;
      let greetingFinished = false;
      let typingIndicator = null;
      let isTyping = false;

      function getCurrentTime() {
        const now = new Date();
        return (
          now.getHours().toString().padStart(2, "0") +
          ":" +
          now.getMinutes().toString().padStart(2, "0")
        );
      }

      setInterval(() => {
        if (receivedText && responseMessage) {
          responseMessage.textContent += receivedText.charAt(0);
          receivedText = receivedText.substring(1);
          if (
            greetingStreaming &&
            receivedText.length === 0 &&
            !greetingFinished
          ) {
            greetingFinished = true;
            messageInput.disabled = false; // ğŸ”“ ì…ë ¥ ê°€ëŠ¥í•˜ê²Œ ë³€ê²½
            if (typingIndicator) typingIndicator.remove();
          }
        }
      }, 80);

      function createReceivedMessageBox() {
        const wrapper = document.createElement("div");
        wrapper.classList.add("received-box");
        responseMessage = document.createElement("div");
        responseMessage.classList.add("message-text", "received");
        const avatar = document.createElement("img");
        avatar.classList.add("avatar");
        avatar.src = "/static/img/img.png";

        const time = document.createElement("div");
        time.className = "received-time";
        time.textContent = getCurrentTime();

        wrapper.appendChild(avatar);
        wrapper.appendChild(responseMessage);
        wrapper.appendChild(time);

        messagesContainer.appendChild(wrapper);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;

        return responseMessage;
      }

      function createSentMessageBox(text) {
        const wrapper = document.createElement("div");
        wrapper.classList.add("sent-box");
        const avatar = document.createElement("img");
        avatar.classList.add("avatar");
        avatar.src = "/static/img/my.png";

        const textDiv = document.createElement("div");
        textDiv.classList.add("message-text", "sent");
        textDiv.textContent = text;

        const time = document.createElement("div");
        time.className = "sent-time";
        time.textContent = getCurrentTime();

        wrapper.appendChild(avatar);
        wrapper.appendChild(textDiv);
        wrapper.appendChild(time);

        messagesContainer.appendChild(wrapper);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
      }

      window.onload = () => {
        messageInput.disabled = true;
        greetingStreaming = true;
        createReceivedMessageBox();
        if (mbtiType) {
          let greeting = '';
          switch (mbtiType) {
            case 'ENFP':
              greeting = "ì•ˆë…•í•˜ì„¸ìš”! ì €ëŠ” ìƒê°ì´ ì—´ë‘ ë°©í–¥ìœ¼ë¡œ íŠ€ëŠ”, ììœ ë¡œìš´ ENFPì˜ˆìš”. ë§í•˜ë‹¤ê°€ ì£¼ì œê°€ê°€ ì„¸ ë²ˆì¯¤ ë°”ë€” ìˆ˜ë„ ìˆëŠ”ë°ìš”, ê´œì°®ìœ¼ì‹œì£ ? ã…ã… í¸í•˜ê²Œ ì•„ë¬´ ì–˜ê¸°ë“  ì‹œì‘í•´ë´ìš”~";
              break;
            case 'ISTJ':
              greeting = "ì•ˆë…•í•˜ì„¸ìš”. ì €ëŠ” ì›ì¹™ê³¼ ì§ˆì„œë¥¼ ì¤‘ìš”í•˜ê²Œ ìƒê°í•˜ëŠ” ISTJì˜ˆìš”. ë„ˆë¬´ ë”±ë”±í•˜ê²Œ ë“¤ë ¸ë‚˜ìš”? ê·¸ë˜ë„ ì§„ì‹¬ì´ì—ìš”. ì°¨ë¶„í•˜ê²Œ ì–˜ê¸° ë‚˜ëˆ ë³¼ê¹Œìš”?";
              break;
            case 'INFP':
              greeting = "ë°˜ê°€ì›Œìš”~ ì €ëŠ” ë§ˆìŒì† ì´ì•¼ê¸°ë¥¼ ì¡°ì‹¬ìŠ¤ëŸ½ê²Œ êº¼ë‚´ëŠ” INFPì…ë‹ˆë‹¤. ë§í•˜ëŠ” ë° ì‹œê°„ì´ ì¢€ ê±¸ë¦´ ìˆ˜ë„ ìˆì§€ë§Œ, ì²œì²œíˆ ë‹¤ê°€ì™€ ì£¼ì‹œë©´ ì €ë„ í¸í•´ì ¸ìš” :)";
              break;
            case 'ENTP':
              greeting = "ì–´ì„œ ì˜¤ì„¸ìš”~ ì €ëŠ” ENTPì˜ˆìš”. ë§ì´ ë§ë‹¤ê¸°ë³´ë‹¨â€¦ ìƒê°ì´ ë§ì•„ì„œ ë§ì´ ë§ì•„ì§€ëŠ” ê±°ì˜ˆìš”ã…‹ã…‹ ëŒ€í™”í•˜ë‹¤ ë³´ë©´ ê°‘ìê¸° ë‹¤ë¥¸ ì–˜ê¸°ë¡œ ìƒˆë„ ì´í•´í•´ì£¼ì„¸ìš”!";
              break;
            case 'INFJ':
              greeting = "ì•ˆë…•í•˜ì„¸ìš”. ì €ëŠ” INFJì˜ˆìš”. ì¡°ìš©í•´ ë³´ì¼ ìˆ˜ ìˆì§€ë§Œ, ë§ˆìŒì†ì€ ìƒê°ìœ¼ë¡œ ê°€ë“í•´ìš”. ë§ë³´ë‹¨ ë¨¼ì € ê³µê°ë¶€í„° ë“œë¦´ê²Œìš”. í¸í•˜ê²Œ ì–˜ê¸°í•´ë³¼ê¹Œìš”?";
              break;
            case 'INTJ':
              greeting = "ë°˜ê°‘ìŠµë‹ˆë‹¤. ì €ëŠ” INTJì…ë‹ˆë‹¤. ëŒ€í™” ì‹œì‘ ì „ì— ì´ë¯¸ ë¨¸ë¦¿ì†ì— ì—¬ëŸ¬ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ê·¸ë ¤ë´¤ì–´ìš”. ì˜ˆìƒ ëª» í•œ ì´ì•¼ê¸°ë¼ë©´ ë” ë°˜ê°€ìš¸ ê²ƒ ê°™ë„¤ìš”.";
              break;
            case 'ISFJ':
              greeting = "ì•ˆë…•í•˜ì„¸ìš”~ ì €ëŠ” ISFJì˜ˆìš”. ë§ë³´ë‹¨ í–‰ë™ìœ¼ë¡œ í‘œí˜„í•˜ëŠ” ê±¸ ë” ì˜í•´ìš”. í•„ìš”í•˜ì‹  ê²Œ ìˆë‹¤ë©´, ì¡°ìš©íˆ ì˜†ì—ì„œ ì±™ê²¨ë“œë¦´ê²Œìš” :)";
              break;
            case 'ESFP':
              greeting = "í—¬ë¡œìš°~ ì €ëŠ” ESFP! ì§€ê¸ˆ ì´ ìˆœê°„ì„ ì¦ê¸°ëŠ” ë° ì§„ì‹¬ì¸ ìŠ¤íƒ€ì¼ì´ì—ìš”! ì‹ ë‚˜ê²Œ ìˆ˜ë‹¤ ë–¨ ì¤€ë¹„ ë˜ì…¨ì£ ? ê·¸ëŸ¼ ì‹œì‘í•´ë´ìš” ğŸ‰";
              break;
            case 'ESTP':
              greeting = "ë°˜ê°‘ìŠµë‹ˆë‹¤! ì €ëŠ” ESTPì˜ˆìš”. ìƒê°ë³´ë‹¤ í–‰ë™ì´ ë¨¼ì € ë‚˜ê°€ëŠ” í¸ì´ë¼, ëŒì§êµ¬ì¼ ìˆ˜ë„ ìˆì–´ìš”. ê·¸ë˜ë„ ì†”ì§í•œ ëŒ€í™”ì—” ìì‹  ìˆì–´ìš”. ë°”ë¡œ ì‹œì‘í•´ë³¼ê¹Œìš”?";
              break;
            case 'INTP':
              greeting = "ì–´ì„œ ì˜¤ì„¸ìš”. ì €ëŠ” INTPì…ë‹ˆë‹¤. ìƒê°ì´ ê¼¬ë¦¬ì— ê¼¬ë¦¬ë¥¼ ë¬¼ë‹¤ ë³´ë‹ˆ, ë§í•˜ë‹¤ ë³´ë©´ ê°€ë” ì €ë„ ê¸¸ì„ ìƒì–´ìš”â€¦ ê¶ê¸ˆí•˜ì‹œì£ ? í•œë²ˆ ì´ì•¼ê¸° ë‚˜ëˆ ë´ìš”.";
              break;
            case 'ENFJ':
              greeting = "ì•ˆë…•í•˜ì„¸ìš”! ì €ëŠ” ENFJì˜ˆìš”. ì‚¬ëŒ ì´ì•¼ê¸°ë¥¼ ê·¸ëƒ¥ ì§€ë‚˜ì¹˜ì§€ ëª»í•˜ëŠ” ì„±ê²©ì´ê±°ë“ ìš” :) ë‹¹ì‹ ì˜ ì–˜ê¸°, ì œê°€ ë¨¼ì € ê·€ ê¸°ìš¸ì¼ê²Œìš”.";
              break;
            case 'ESTJ':
              greeting = "ì•ˆë…•í•˜ì„¸ìš”. ì €ëŠ” ESTJì…ë‹ˆë‹¤. ë§ ëŒë¦¬ëŠ” ê±°, ë³„ë¡œ ì•ˆ ì¢‹ì•„í•´ìš”. í•„ìš”í•œ ì–˜ê¸° ë”± ì •ë¦¬í•´ì„œ ë‚˜ëˆ ë³¼ê²Œìš”. ì±…ì„ê°ì€ ê¸°ë³¸ì´ë‹ˆê¹Œìš”!";
              break;
            case 'ISFP':
              greeting = "ì•ˆë…•í•˜ì„¸ìš”â€¦ ì €ëŠ” ISFPì˜ˆìš”. ë§ë³´ë‹¨ ëŠë‚Œì„ ë” ì¤‘ìš”í•˜ê²Œ ìƒê°í•´ìš”. ì¡°ìš©í•˜ì§€ë§Œ, ë§ˆìŒì€ ëˆ„êµ¬ë³´ë‹¤ ë”°ëœ»í•˜ë‹µë‹ˆë‹¤ :)";
              break;
            case 'ESFJ':
              greeting = "ì•ˆë…•í•˜ì„¸ìš”~ ì €ëŠ” ESFJì…ë‹ˆë‹¤! ì–´ìƒ‰í•œ ë¶„ìœ„ê¸°ì—” ëˆ„êµ¬ë³´ë‹¤ ì˜ˆë¯¼í•œ í¸ì´ì—ìš”ã…ã… ì»¤í”¼ í•œ ì” ë‚˜ëˆ„ë“¯, í¸í•˜ê²Œ ì–˜ê¸° ë‚˜ëˆ ìš”~";
              break;
            case 'ENTJ':
              greeting = "ë°˜ê°‘ìŠµë‹ˆë‹¤. ì €ëŠ” ENTJì˜ˆìš”. ëŒ€í™”ë„ ì „ëµì ìœ¼ë¡œ ì ‘ê·¼í•˜ëŠ” ìŠ¤íƒ€ì¼ì´ì—ìš”. ì›ë˜ëŠ” ìˆ˜ë‹¤ë¥¼ ì•ˆ ì¢‹ì•„í•˜ì§€ë§Œâ€¦ ì˜¤ëŠ˜ì€ ì¢€ ì˜ˆì™¸ë¡œ í•´ë³¼ê¹Œìš”?";
              break;
            case 'ISTP':
              greeting = "ì•ˆë…•í•˜ì„¸ìš”. ì €ëŠ” ISTPì˜ˆìš”. ë§ìˆ˜ëŠ” ë§ì§€ ì•Šì§€ë§Œ, í•„ìš”í•œ ë§ì€ í™•ì‹¤íˆ í•´ìš”. ê°ì • í‘œí˜„ì€ ì¡°ê¸ˆ ì„œíˆ´ ìˆ˜ ìˆì–´ìš”. ëŒ€ì‹  ì§„ì‹¬ì€ ìˆ¨ê¸°ì§€ ì•Šì•„ìš”.";
              break;
            default:
              greeting = `${mbtiType} ìºë¦­í„° ì±—ë´‡ì…ë‹ˆë‹¤. ëŒ€í™”ë¥¼ ì‹œì‘í•´ì£¼ì„¸ìš”.`;
          }
          receivedText += greeting;
        } else {
          receivedText += "ì•ˆë…•í•˜ì„¸ìš”! ì±—ë´‡ì´ì—ìš”!";
        }
      };

      ws.onmessage = (event) => {
        try {
          const data = JSON.parse(event.data);

          if (data.type === "user") {
            if (data.content.startsWith("You wrote:")) {
              const userText = data.content.replace("You wrote:", "").trim();
              createSentMessageBox(userText);
              messageInput.disabled = true;
            }
          } else if (data.type === "stream") {
            if (!isTyping) {
              isTyping = true;
              responseMessage = createReceivedMessageBox();
              responseMessage.textContent = "";
            }
            responseMessage.textContent += data.content;
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
          } else if (data.type === "end") {
            isTyping = false;
            messageInput.disabled = false;
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
          }
        } catch (error) {
          console.error("ë©”ì‹œì§€ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜:", error);
          // JSON í˜•ì‹ì´ ì•„ë‹Œ ê²½ìš° ê¸°ì¡´ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬ (ì´ì „ ë²„ì „ê³¼ì˜ í˜¸í™˜ì„± ìœ ì§€)
          const messageData = event.data.trim();

          if (messageData.startsWith("You wrote:")) {
            responseMessage = null;
            messageInput.disabled = true;
            const userText = messageData.replace("You wrote:", "").trim();
            createSentMessageBox(userText);
          } else {
            if (!responseMessage) {
              messageInput.disabled = true;
              responseMessage = createReceivedMessageBox();
              responseMessage.textContent = "";
            }
            responseMessage.textContent += messageData;
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
          }
        }
      };

      chatForm.addEventListener("submit", (event) => {
        event.preventDefault();
        if (messageInput.disabled || !messageInput.value.trim()) return;
        ws.send(messageInput.value);
        messageInput.value = "";
      });

      imageInput.addEventListener("change", (event) => {
        const file = event.target.files[0];
        if (file) {
          alert(
            "ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥ì€ ë°ëª¨ UIì…ë‹ˆë‹¤. ì‹¤ì œ ì—…ë¡œë“œ ì²˜ë¦¬ëŠ” ì„œë²„ êµ¬í˜„ í•„ìš”!"
          );
        }
      });

      const messageText = document.getElementById('messageText');
      messageText.addEventListener('input', function() {
        this.style.height = 'auto';
        this.style.height = (this.scrollHeight) + 'px';
        this.scrollTop = this.scrollHeight;
      });
    </script>
  </body>
</html>
